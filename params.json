{"name":"Validatar","tagline":"Functional testing framework for Big Data pipelines","body":"# Validatar\r\n\r\n[![Build Status](https://travis-ci.org/yahoo/validatar.svg?branch=master)](https://travis-ci.org/yahoo/validatar) [![Coverage Status](https://coveralls.io/repos/yahoo/validatar/badge.svg?branch=master)](https://coveralls.io/r/yahoo/validatar?branch=master) [![Download](https://api.bintray.com/packages/yahoo/maven/validatar/images/download.svg)](https://bintray.com/yahoo/maven/validatar/_latestVersion)\r\n\r\nFunctional testing framework for Big Data pipelines. Currently support querying pipeline results through Hive (HiveServer2) and Pig (PigServer).\r\n\r\nValidatar is currently compiled against *Pig-0.14*. Running against an older or newer version may result in issues if interfaces have changed. These are relatively minor from experience and can be fixed with relatively minor fixes to engine code.\r\n\r\n## How to build Validatar\r\n\r\nYou need maven/JDK to build Validatar.\r\n\r\nRun:\r\n\r\n    make jar\r\n\r\n## How to run\r\n\r\nUse hadoop jar validatar-jar-with-dependencies.jar com.yahoo.validatar.App --help (or -h) for Help\r\n\r\n### To run Hive tests in Validatar:\r\n\r\n    export HADOOP_CLASSPATH=\"$HADOOP_CLASSPATH:/path/to/hive/jdbc/lib/jars/*\"\r\n    hadoop jar validatar-jar-with-dependencies.jar com.yahoo.validatar.App -s tests/ --report report.xml --hive-jdbc ...\r\n\r\nHive needs the JDBC uri of HiveServer2. Note that the DB is in the URI. Do not add it if your queries use\r\n```\r\n... FROM DB.TABLE WHERE ...\r\n\r\n--hive-jdbc \"jdbc:hive2://<URI>/<DB>;<Optional params: E.g. sasl.qop=auth;principal=hive/<PRINCIPAL_URL> etc>\r\n```\r\n\r\n### To run Pig tests in Validatar:\r\n\r\n    export HADOOP_CLASSPATH=\"$HADOOP_CLASSPATH:/path/to/pig/lib/*\" (Add other jars here depending on your pig exec type or if hive/hcat is used in Pig)\r\n    hadoop jar validatar-jar-with-dependencies.jar com.yahoo.validatar.App -s tests/ --report report.xml --pig-exec-type mr --pig-setting 'mapreduce.job.acl-view-job=*' ...\r\n\r\nPig parameters are not supported in the pig query. Instead, use our parameter substitution (see below).\r\n\r\n## Writing Tests\r\n\r\n### Test file format\r\n\r\nTest files are written in the YAML format. See example in src/test/resources/. The schema is as follows:\r\n\r\n```\r\nname: Test family name : String\r\ndescription: Test family description : String\r\nqueries:\r\n   - name: Query name : String : Ex \"Analytics\"\r\n     engine: Execution engine : String Ex \"hive\" or \"pig\"\r\n     value: Query : String : Ex \"SELECT COUNT(*) AS pv_count FROM page_data\"\r\n   ...\r\ntests:\r\n   - name: Test name : String\r\n     description: Test description : String\r\n     asserts:\r\n        - Assertion on some query. Query name is prefixed to the value. : Ex Analytics.pv_count > 10000\r\n   ...\r\n```\r\n\r\nQueries are named, this name is used as a namespace for all the values returned from the query. In the above example, we created a query named \"Analytics\". It stores the return value \"pv_count\". We are then able to use this in our later asserts.\r\n\r\nValidatar can run a single test file or a folder of test files. Use the --help option to see more details.\r\n\r\n### Assertions\r\n\r\nAssertions are quite flexible, allowing for the following operations:\r\n\r\n```\r\n                   >  : greater than\r\n                   >= : greater or equal to\r\n                   <  : less than\r\n                   <= : less or equal to\r\n                   == : equal to\r\n                   != : not equal to\r\n                   +  : add\r\n                   -  : subtract\r\n                   *  : multiply\r\n                   /  : divide\r\n                   && : boolean and\r\n                   || : boolean or\r\napprox(a, b, percent) : true if a and b within percent difference (0.0 to 1.0) of each other.\r\n```\r\n\r\n### Parameter Substitution\r\n\r\nYou may want queries that use a specific date column, or similar changing parameter. For this, we have a parameter substation feature.\r\n\r\nSimply pass `--parameter KEY=VALUE` in the CLI and the `KEY` will be replaced with `VALUE` in all queries. For example, to query June 23rd 2015, you could use `--parameter DATE=2015-06-23`. If the query uses `${DATE}` in the query it will be replaced before execution with `2015-06-23`.\r\n\r\n## Changelog\r\n\r\nVersion | Notes\r\n------- | -----\r\n0.1.4 | Initial release with Hive\r\n0.1.5 | Typesystem, metadata support\r\n0.1.6 | No feature release. Source and Javadoc bundled in artifact\r\n0.1.7 | Multiple Hive databases across Queries\r\n0.1.8 | Null types in Hive results fix\r\n0.1.9 | Empty results handling bug fix\r\n0.2.0 | Internal switch to Java 8. hive-queue is no longer a setting. Use hive-setting.\r\n0.3.0 | Pig support added.\r\n\r\n## Members\r\n\r\nAkshai Sarma, akshaisarma@gmail.com\r\nJosh Walters, josh@joshwalters.com\r\n\r\n## Contributors\r\n\r\n\r\n","google":"","note":"Don't delete this file! It's used internally to help with page regeneration."}